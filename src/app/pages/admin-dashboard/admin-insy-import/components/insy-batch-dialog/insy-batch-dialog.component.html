<p-dialog
  header="Batch-Import"
  [(visible)]="visible"
  [modal]="true"
  [style]="{ width: '500px' }"
  [contentStyle]="{ 'max-height': '70vh', 'overflow-y': 'auto' }"
  [focusOnShow]="false"
  [draggable]="false"
  (onShow)="onShow()"
>
  <div class="py-4 space-y-4">
    <p>
      <strong>{{ selectedCount() }}</strong> Items werden zu einem Produkt importiert.
    </p>

    <div>
      <label for="batchProductSelect" class="block text-sm font-medium text-gray-700 mb-2">
        Ziel-Produkt <span class="text-red-500">*</span>
      </label>
      <p-select
        inputId="batchProductSelect"
        [options]="products()"
        [(ngModel)]="selectedProductId"
        optionLabel="name"
        optionValue="id"
        placeholder="Produkt waehlen"
        [filter]="true"
        filterPlaceholder="Suchen..."
        class="w-full"
        name="batchProductSelect"
        appendTo="body"
      />
    </div>

    <div>
      <label for="batchInvPrefix" class="block text-sm font-medium text-gray-700 mb-2">
        Inventarnummer-Praefix (optional)
      </label>
      <input
        type="text"
        pInputText
        id="batchInvPrefix"
        [(ngModel)]="invNumberPrefix"
        placeholder="z.B. VR"
        class="w-full"
        name="batchInvPrefix"
      />
      <p class="text-sm text-gray-500 mt-1">
        Leer lassen um InSy-Inventarnummern zu verwenden
      </p>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <p-button
      label="Abbrechen"
      icon="pi pi-times"
      (onClick)="onCancel()"
      [text]="true"
    />
    <p-button
      label="Importieren"
      icon="pi pi-check"
      (onClick)="onConfirm()"
      severity="success"
      [disabled]="!isValid()"
    />
  </ng-template>
</p-dialog>
