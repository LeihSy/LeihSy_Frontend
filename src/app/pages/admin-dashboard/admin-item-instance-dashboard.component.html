<div class="p-8 max-w-7xl mx-auto">
  <p-toast position="bottom-right"></p-toast>
  <p-confirmDialog></p-confirmDialog>

  <div class="flex justify-between items-center mb-6">
    <div>
      <h1 class="text-3xl font-bold mb-2">Einzelne Gegenstände verwalten</h1>
      <p class="text-muted-foreground">
        Erstelle, bearbeite oder lösche einzelne physische Gegenstände zu jedem Produkt
      </p>
    </div>
  </div>


  <p-card header="Produkte und ihre Gegenstände">

    <div class="mb-4">
      <app-search-bar
        [placeholder]="'Suche nach Produktname, Kategorie...'"
        [(value)]="searchQuery"
        (valueChange)="onSearchChange($event)">
      </app-search-bar>
    </div>

    <div class="space-y-4">
      @for (productData of productsWithItems(); track productData.product.id) {
        <app-product-list-item
          [productData]="productData"
          [isExpanded]="isProductExpanded(productData.product.id)"
          [itemColumns]="itemColumns"
          (toggleExpansion)="toggleProductExpansion($event)"
          (addItem)="addItemForProduct($event)"
          (editItem)="editItem($event)"
          (deleteItem)="deleteItem($event)">
        </app-product-list-item>
      }
    </div>

    @if (productsWithItems().length === 0) {
      <div class="text-center text-gray-500 py-8">
        @if (isLoading()) {
          Lade Produkte...
        } @else if (searchQuery()) {
          Keine Produkte gefunden für "{{ searchQuery() }}"
        } @else {
          Keine Produkte vorhanden
        }
      </div>
    }

  </p-card>
</div>

