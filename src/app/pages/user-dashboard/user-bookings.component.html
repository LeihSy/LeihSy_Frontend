<div class="bookings-container">
  <p-toast position="bottom-right"></p-toast>

  <!-- Header Section -->
  <div class="header-section">
    <div class="header-content">
      <div class="header-icon">
        <i class="pi pi-calendar text-4xl"></i>
      </div>
      <div>
        <h1 class="header-title">Meine Buchungen</h1>
        <p class="header-subtitle">
          Übersicht über alle Ihre Buchungen und Ausleihen
        </p>
      </div>
    </div>
    <div class="stats-badge">
      <i class="pi pi-chart-line"></i>
      <span>{{ filteredBookings().length }} Buchung(en)</span>
    </div>
  </div>

  <!-- Search Card -->
  <p-card class="search-card">
    <div class="search-wrapper">
      <p-iconfield iconPosition="left" class="search-field">
        <p-inputicon styleClass="pi pi-search"></p-inputicon>
        <input
          type="text"
          pInputText
          placeholder="Suche nach Produkt, Inventarnummer, Verleiher oder Status..."
          [(ngModel)]="searchQuery"
          (ngModelChange)="searchQuery.set($event)"
          class="search-input" />
      </p-iconfield>
      @if (searchQuery()) {
        <button
          pButton
          icon="pi pi-times"
          class="p-button-text p-button-rounded"
          (click)="searchQuery.set('')"
          pTooltip="Suche zurücksetzen"></button>
      }
    </div>
  </p-card>

  <!-- Bookings Table Card -->
  <p-card class="table-card">
    @if (isLoading()) {
      <div class="loading-state">
        <i class="pi pi-spin pi-spinner loading-spinner"></i>
        <p class="loading-text">Lade Buchungen...</p>
      </div>
    } @else {
      @if (filteredBookings().length === 0) {
        <div class="empty-state">
          <div class="empty-icon">
            <i class="pi pi-inbox"></i>
          </div>
          <h3 class="empty-title">
            @if (searchQuery()) {
              Keine Ergebnisse gefunden
            } @else {
              Noch keine Buchungen
            }
          </h3>
          <p class="empty-message">
            @if (searchQuery()) {
              Ihre Suche nach "{{ searchQuery() }}" ergab keine Treffer.
            } @else {
              Sie haben aktuell keine Buchungen. Starten Sie jetzt mit Ihrer ersten Ausleihe!
            }
          </p>
        </div>
      } @else {
        <app-tabelle
          [columns]="columns"
          [data]="filteredBookings()"
          [loading]="isLoading()"
          [showActions]="false"
          [rows]="10"
          [paginator]="true"
          [scrollable]="false"
          emptyMessage="Keine Buchungen vorhanden">
        </app-tabelle>
      }
    }
  </p-card>
</div>

